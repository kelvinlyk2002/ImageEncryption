<script src="/js/jquery-3.6.0.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script>
    function updateAvailableFields(selectedDeviceType, deviceTypes){
    if(deviceTypes[selectedDeviceType]["canOnOff"]){
        $("#form_onOff").show();
    } else {
        $("#form_onOff").hide();
        $("onOff").val(-125); 
    }
    if(deviceTypes[selectedDeviceType]["canOpenClose"]){
        $("#form_openClose").show();
    } else {
        $("#form_openClose").hide();
        $("openClose").val(-125);
    }
    if(deviceTypes[selectedDeviceType]["canAdjustVol"]){
        $("#form_adjustVol").show();
    } else {
        $("#form_adjustVol").hide();
        $("volume").val(-125);
    }
    if(deviceTypes[selectedDeviceType]["canAdjustTemp"]){
        $("#form_adjustTemp").show();
    } else {
        $("#form_adjustTemp").hide();
        $("temperature").val(-125);
    }
    if(deviceTypes[selectedDeviceType]["canAdjustBrightness"]){
        $("#form_adjustBrightness").show();
    } else {
        $("#form_adjustBrightness").hide();
        $("temperature").val(-125);
    }
}

function handleForm(selectedDeviceType, deviceTypes){
    if(deviceTypes[selectedDeviceType]["canOnOff"]){
        var onOff = $("#onOff").val();
    } else {
        var onOff = -125;
    }
    if(deviceTypes[selectedDeviceType]["canOpenClose"]){
        var openClose = $("#openClose").val();
    } else {
        var openClose = -125;
    }
    if(deviceTypes[selectedDeviceType]["canAdjustVol"]){
        var volume = $("#adjustVol").val();
        if(volume == null){ volume = -125} else {
            volume = Math.max(Math.min(volume, 100), 0);
        };
    } else {
        var volume = -125;
    }
    if(deviceTypes[selectedDeviceType]["canAdjustTemp"]){
        var temperature = $("#adjustTemp").val();
        if(temperature == null){ temperature = -125} else {
            if(selectedDeviceType == "Hob" || selectedDeviceType == "Oven"){
                maxTemp = 400;
            } else {
                maxTemp = 100;
            }
            temperature = Math.max(Math.min(temperature, maxTemp), 0);
        };
    } else {
        var temperature = -125;
    }
    if(deviceTypes[selectedDeviceType]["canAdjustBrightness"]){
        var brightness = $("#adjustBrightness").val();
        if(brightness == null){ brightness = -125} else {
            brightness = Math.max(Math.min(brightness, 100), 0);
        };
    } else {
        var brightness = -125;
    }
    formElements = {
        "deviceType": deviceTypes[selectedDeviceType]["id"],
        "onOff": onOff,
        "openClose": openClose,
        "volume": volume,
        "temperature": temperature,
        "brightness": brightness,
        "id": null
    }
    return formElements;
}
</script>